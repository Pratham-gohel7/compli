<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Overtime Register for Exempted Workers</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 10px;
        font-size: 12px;
      }

      h2 {
        text-align: center;
        font-size: 16px;
        text-transform: uppercase;
      }

      .header {
        text-align: center;
        margin-bottom: 10px;
        font-size: 14px;
        font-weight: bold;
      }

      .info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        margin-top: 20px;
        font-size: 14px;
      }

      .left-info,
      .right-info {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .right-info {
        align-items: flex-end;
      }

      table {
        width: 100%;
        border-collapse: separate;
        margin-top: 10px;
      }

      th,
      td {
        border: 1px solid black;
        padding: 6px;
        text-align: center;
        font-size: 12px;
      }

      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h2>FORM NO. 13</h2>
      <p>(Prescribed under rule 85)</p>
      <h3>Overtime Register for Exempted Workers</h3>
      <div class="info">
        <div class="left-info">
          <p>
            <strong>Name OF Establishment:</strong> <%= company.company_name %>
          </p>
          <p>
            <strong>Address Of Establishment:</strong> <%= company.address ||
            "N/A" %>
          </p>
        </div>
        <div class="right-info">
          <p><strong>Month:</strong> <%= month %></p>
        </div>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th rowspan="2">S.No.</th>
          <th rowspan="2">Serial No. in Register</th>
          <th rowspan="2">Name of Exempted Worker</th>
          <th rowspan="2">Department</th>
          <th colspan="2">Normal Hours of Work Prescribed</th>
          <th colspan="3">Overtime Worked</th>
          <th rowspan="2">Total Overtime Hours</th>
          <th colspan="2">Normal Rate of Pay</th>
          <th colspan="2">Overtime Rate of Pay</th>
          <th colspan="2">Earnings During the Month</th>
          <th rowspan="2">Total (Normal + Overtime)</th>
          <th rowspan="2">Overtime Payment Date</th>
        </tr>
        <tr>
          <th>Daily</th>
          <th>Weekly</th>
          <th>Date</th>
          <th>Additional Production</th>
          <th>Hours</th>
          <th>Per Hour</th>
          <th>Per Piece</th>
          <th>Per Hour</th>
          <th>Per Piece</th>
          <th>Normal</th>
          <th>Overtime</th>
        </tr>
      </thead>
      <tbody>
        <% records.forEach((record, index) => { %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= record.employee_id %></td>
          <td><%= employees[record.employee_id]?.first_name || "N/A" %></td>
          <td><%= employees[record.employee_id]?.department || "N/A" %></td>  
          <!-- âœ… Fixed -->
          <td><%= record.daily_hours %></td>
          <td><%= record.weekly_hours %></td>
          <td><%= record.date %></td>
          <td><%= record.additional_production %></td>
          <td><%= record.overtime_hours %></td>
          <td><%= record.total_overtime_hours %></td>
          <td><%= record.normal_rate_per_hour %></td>
          <td><%= record.normal_rate_per_piece %></td>
          <td><%= record.overtime_rate_per_hour %></td>
          <td><%= record.overtime_rate_per_piece %></td>
          <td><%= record.normal_earning %></td>
          <td><%= record.overtime_earning %></td>
          <td><%= record.total_earning %></td>
          <td><%= record.overtime_pay_date %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
  </body>
</html>
